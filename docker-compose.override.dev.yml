services:
  app:
    build:
      dockerfile: Docker/Dockerfile.app.dev
    entrypoint: /entrypoint.app.dev.sh
    labels:
      - traefik.http.routers.app.entrypoints=web
      - traefik.http.routers.app.priority=10
    volumes:
      - ./app:/app
      - ./data/upload:/app/upload
      - ./data/traefik:/data/traefik
      - ./access.json:/app/settings/access.json
  worker-arq:
    build:
      dockerfile: Docker/Dockerfile.app.dev
    entrypoint: /entrypoint.worker-arq.dev.sh
    volumes:
      - ./app:/app
      - ./data/traefik:/data/traefik

  worker-monitor:
    build:
      dockerfile: Docker/Dockerfile.app.dev
    entrypoint: /entrypoint.worker-monitor.dev.sh
    volumes:
      - ./app:/app
  
  pgsql:
    ports:
      - "5432:5432"
    networks:
      - default

  traefik:
    ports:
      - "80:80"
    volumes:
      - ./data/traefik:/etc/traefik/dynamic_conf
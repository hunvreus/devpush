{% from "macros/copy.html" import copy %}

<div class="card">
  <header class="border-b">
    <h2>{{ _('Installation') }}</h2>
    <p>{{ _('Information about this installation and available updates.') }}</p>
  </header>

  <section class="space-y-4">
    {% if version_info %}
      <ul class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <li>
          <div class="text-muted-foreground text-sm">{{ _('Version') }}</div>
          <div class="flex items-center gap-x-2">
            <span class="font-mono text-[13px]">{{ version_info.get('git_ref', '-') }}</span>
            <div
              hx-get="{{ url_for('admin_settings') }}?fragment=system"
              hx-swap="outerHTML"
              hx-trigger="load"
              class="badge-secondary [&>svg]:animate-spin"
            >
              {% include "icons/loader.svg" %}
              {{ _('Checking') }}
            </div>
          </div>
        </li>
        <li>
          <div class="text-muted-foreground text-sm">{{ _('Last updated') }}</div>
          {{ version_info.get('updated_at') | time_ago }}
        </li>
        <li>
          <div class="text-muted-foreground text-sm">{{ _('Install ID') }}</div>
          <div class="flex items-center gap-x-2">
            <span class="font-mono truncate max-w-full flex-1 text-[13px]">{{ version_info.get('install_id', '-') }}</span>
            {{ copy(value=version_info.get('install_id'), class="size-3 [&_svg]:size-3") }}
          </div>
        </li>
      </ul>
    {% else %}
      <p class="text-muted-foreground">{{ _('No version information found.') }}</p>
    {% endif %}
  </section>
</div>

{% from "admin/macros/pagination.html" import pagination %} {% from
"macros/dialog.html" import dialog %} {% if allowlist_entries %}
<div class="rounded-xl border relative overflow-x-auto">
    <table class="table">
        <thead>
            <tr>
                <th class="pl-4">{{ _('Type') }}</th>
                <th>{{ _('Value') }}</th>
                <th>{{ _('Added') }}</th>
                <th class="w-12"></th>
            </tr>
        </thead>
        <tbody>
            {% for entry in allowlist_entries %}
            <tr>
                <td class="pl-4">
                    {% if entry.type == "email" %}
                    <span class="badge-outline">{{ _('Email') }}</span>
                    {% elif entry.type == "domain" %}
                    <span class="badge-outline">{{ _('Domain') }}</span>
                    {% elif entry.type == "pattern" %}
                    <span class="badge-outline">{{ _('Pattern') }}</span>
                    {% endif %}
                </td>
                <td class="truncate font-medium w-full max-w-1">
                    {{ entry.value }}
                </td>
                <td>{{ entry.created_at | time_ago }}</td>
                <td class="text-left">
                    {% set trigger %} {% include "icons/trash-2.svg" %} {{
                    _('Delete') }} {% endset %} {% call dialog( trigger=trigger,
                    title=_('Delete this entry?'), description=_('Are you sure
                    you want to delete this allowlist entry? This action cannot
                    be undone.'), trigger_attrs={"class": "btn-sm-ghost
                    text-destructive"}, dialog_attrs={"class": "max-w-md"},
                    cancel_label=_('Cancel'), confirm_label=_('Delete'),
                    confirm_attrs={ "hx-post": "", "hx-target": "closest .card",
                    "hx-swap": "outerHTML", "hx-indicator": "next
                    .htmx-indicator", "hx-push-url": "false", "hx-vals":
                    '{"csrf_token": "' +
                    allowlist_delete_form.csrf_token._value() + '", "entry_id":
                    "' + entry.id|string + '", "action": "delete_allowlist"}' }
                    ) %} {% endcall %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{{ pagination(allowlist_pagination, "allowlist_page", request,
hx_target="#allowlist-content", fragment="allowlist-content") }} {% else %}
<div class="text-center py-8 text-muted-foreground">
    <p>{{ _('No allowlist entries found.') }}</p>
</div>
{% endif %}

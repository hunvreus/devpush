<div class="card">
  <header class="border-b">
    <h2>{{ _("Danger zone") }}</h2>
    <p>{{ _("Permanently delete the team and all of its settings, projects and deployments.") }}</p>
  </header>

  <section>
    {% if get_access(role, "owner") %}
      {% if delete_team_form %}
        {% from "macros/dialog.html" import dialog %}
        {% set trigger %}
          {% include "icons/trash-2.svg" %}
          {{ _("Delete team") }}
        {% endset %}
        {% call dialog(
          trigger=trigger,
          title=_('Delete "%(name)s"?', name=team.name),
          trigger_attrs={"class": "btn-destructive"},
          dialog_attrs={"class": "max-w-md"},
          close_button=false,
          close_on_overlay_click=false
        ) %}
        <div class="space-y-4" x-data="{ confirm: '' }">
          <p>{{ _("This will delete the team, its configuration, projects and deployments. This action cannot be undone.")
            }}</p>
          <p>{{ _('To confirm, enter the team slug <b>"%(slug)s"</b> below.', slug=team.slug) | safe }}</p>
          <form
            method="POST"
            action="{{ url_for('team_settings', team_slug=team.slug).include_query_params(fragment='danger') }}"
          >
            {{ delete_team_form.csrf_token() }}
            {{ delete_team_form.slug(value=team.slug) }}
            {{ delete_team_form.confirm(
              class_="input w-full",
              placeholder=_("Type the team slug to confirm"),
              **{"x-model": "confirm"}
            ) }}
            <footer class="flex justify-end gap-x-2 mt-4">
              <button class="btn-ghost" onclick="this.closest('dialog').close()">{{ _('Cancel') }}</button>
              {{ delete_team_form.submit(
                class_="btn-destructive",
                **{
                  ":disabled": "confirm !== '" + team.slug + "'",
                  "data-icon": "trash"
                }
              ) }}
            </footer>
          </form>
        </div>
        {% endcall %}
      {% else %}
        <div class="space-y-6">
          <div class="alert">
            {% include "icons/info.svg" %}
            <h2>{{ _("This is your default team, you cannot leave or delete it.") }}</h2>
          </div>
        </div>
      {% endif %}
    {% else %}
      <div class="space-y-6">
        <div class="alert">
          {% include "icons/info.svg" %}
          <h2>{{ _("Only team owners can delete a team.") }}</h2>
        </div>
      </div>
    {% endif %}
  </section>
</div>
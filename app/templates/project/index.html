{% extends "base.html" %}

{% block app_content %}
<div class="container max-w-screen-lg mx-auto px-4 py-16 prose">
    <h1 class="h2">{{ project.name }}</h1>
    <p class="text-muted-foreground">{{ project.repo_full_name }}</p>
    <ul>
        {% for deployment in deployments %}
            <li class="flex items-center justify-between">
                <h3 class="font-semibold">{{ deployment.id }}</h3>
                {% if deployment.status != 'completed' %}
                    <p class="text-muted-foreground">{{ deployment.status }}</p>
                {% else %}
                    {% set status_class = {
                        'succeeded': 'text-success bg-success/10',
                        'failed': 'text-danger bg-danger/10'
                    }.get(deployment.conclusion, 'text-muted-foreground') %}
                    <p class="{{ status_class }} rounded-full text-xs px-2 py-1">{{ deployment.conclusion }}</p>
                    <a href="http://{{ deployment.id }}.{{ config.BASE_DOMAIN }}" target="_blank" class="btn-outline">View</a>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
    <form action="" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(class="btn") }}
    </form>
</div>
{% endblock %}
<div class="card">
  <header class="border-b">
    <h2>{{ _('Danger zone') }}</h2>
    <p>{{ _('Permanently delete the project and all of its configuration, environments and deployments.') }}</p>
  </header>

  <section>
    {% if get_access(role, "admin") %}
      {% from "macros/dialog.html" import dialog %}
      {% set trigger %}
        {% include "icons/trash-2.svg" %}
        {{ _('Delete project') }}
      {% endset %}
      {% call dialog(
        trigger=trigger,
        title=_('Delete "%(name)s"?', name=project.name),
        trigger_attrs={"class": "btn-destructive"},
        dialog_attrs={"class": "max-w-md"},
        close_button=false,
        close_on_overlay_click=false
      ) %}
      <div class="space-y-4" x-data="{ confirm: '' }">
        <p>{{ _('This will delete the project, its configuration, environments and deployments. This action cannot be undone.') }}</p>
        <p>{{ _('To confirm, enter the project name <b>"%(name)s"</b> below.', name=project.name) | safe }}</p>
        <form
          method="POST"
          action="{{ url_for('project_settings', team_slug=team.slug, project_name=project.name).include_query_params(fragment='danger') }}"
        >
          {{ delete_project_form.csrf_token() }}
          {{ delete_project_form.name(value=project.name) }}
          {{ delete_project_form.confirm(
            class_="w-full",
            placeholder=_('Type the project name to confirm'),
            **{'x-model': 'confirm'}
          ) }}
          <footer class="flex justify-end gap-x-2 mt-4">
            <button class="btn-ghost" onclick="this.closest('dialog').close()">{{ _('Cancel') }}</button>
            {{ delete_project_form.submit(
              class_="btn-destructive",
              **{
                ':disabled': "confirm !== '" + project.name + "'",
                'data-icon': 'trash'
              }
            ) }}
          </footer>
        </form>
      </div>
      {% endcall %}
    {% else %}
      <div class="space-y-6">
        <div class="alert">
          {% include "icons/info.svg" %}
          <h2>{{ _("Only team owners and admins can delete projects.") }}</h2>
        </div>
      </div>
    {% endif %}
  </section>
</div>
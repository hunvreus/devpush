{% if accounts %}
<section class="space-y-4 w-full">
  <form
    class="form flex gap-x-2 items-center"
    hx-trigger="
      keyup changed delay:500ms from:input[name='query'],
      search from:input[name='query'],
      change,
      load
    "
    hx-get="{{ request.url_for('github_repos') }}"
    hx-target="next [role='listbox']"
    hx-indicator="next div > .htmx-indicator"
  >
    {% from "components/select.html" import select %}
    {% call select(
      selected=selected_account,
      name="account"
    ) %}
      {% for account in accounts %}
        <div role="option" data-value="{{ account }}">
          <span class="flex items-center gap-x-2">
            <img src="https://github.com/{{ account }}.png" alt="{{ account }}" class="size-5 rounded">
            {{ account }}
          </span>
        </div>
      {% endfor %}
      <hr role="separator"/>
      <a role="option" href="{{ url_for('github_app_install') }}">
        {{ _('Add account') }}
      </a>
    {% endcall %}
    
    <div class="relative flex-1">
      <input name="query" type="search" class="w-full !pl-9" x-model="query" placeholder="{{ _('Search by name') }}">
      <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 opacity-50 [&>svg]:size-4">
        {% include "icons/search.svg" %}
      </span>
    </div>
  </form>

  <div class="relative">
    <div class="h-60 htmx-indicator absolute inset-0 bg-background">
      {% include "projects/partials/_repo-select-list-skeleton.html" %}
    </div>

    <div role="listbox" aria-label="Repository list" aria-live="polite"></div>
  </div>
</section>
{% else %}
<section class="flex items-center justify-center min-h-60 bg-card text-card-foreground border shadow-sm rounded-xl p-4">
  <div class="max-w-sm text-center">
    <h2 class="h4">{{ _('No accounts connected') }}</h2>
    <p class="text-muted-foreground mt-1">{{ _('Connect your GitHub accounts and start adding projects.') }}</p>
    <a class="btn-sm mt-4" href="{{ url_for('api.github_app_install') }}">{{ _('Add a GitHub account') }}</a>
  </div>
</section>
{% endif %}